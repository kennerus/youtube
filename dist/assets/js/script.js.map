{"version":3,"sources":["GetYoutubeVideo.js","script.js","modal/modal.js"],"names":["AddVideo","input","videoContainer","document","getElementById","link","videoId","indexOf","split","ampersandPosition","substring","elementType","className","innerHtml","appendTo","modal","querySelector","element","createElement","innerHTML","appendChild","player","YT","Player","height","width","getYoutubeId","apiURL","xhr","XMLHttpRequest","postAjax","open","send","status","youtubeData","JSON","parse","responseText","console","log","onYouTubeIframeAPIReady","addVideo","oninput","httpRequest","value","openModalBtn","closeModal","addEventListener","classList","add","remove"],"mappings":"AAAA;;;;;;IAEAA,Q;AACA,oBAAAC,KAAA,EAAAC,cAAA,EAAA;AAAA;;AACA,SAAAA,cAAA,GAAAC,SAAAC,cAAA,CAAAF,cAAA,CAAA;AACA;;;;iCAEAG,I,EAAA;AACA,UAAAC,gBAAA;AACA,UAAAD,KAAAE,OAAA,CAAA,MAAA,MAAA,CAAA,CAAA,EAAA;AACAD,kBAAAD,KAAAG,KAAA,CAAA,mBAAA,EAAA,CAAA,CAAA;AACA,eAAAF,OAAA;AACA,OAHA,MAGA;AACAA,kBAAAD,KAAAG,KAAA,CAAA,IAAA,EAAA,CAAA,CAAA;AACA,YAAAC,oBAAAH,QAAAC,OAAA,CAAA,GAAA,CAAA;;AAEA,YAAAE,sBAAA,CAAA,CAAA,EAAA;AACAH,oBAAAA,QAAAI,SAAA,CAAA,CAAA,EAAAD,iBAAA,CAAA;AACA;AACA,eAAAH,OAAA;AACA;AACA;;;kCAEAK,W,EAAAC,S,EAAAC,S,EAAAC,Q,EAAA;AACA,UAAAC,QAAAZ,SAAAa,aAAA,OAAAF,QAAA,CAAA;AACA,UAAAG,UAAAd,SAAAe,aAAA,CAAAP,WAAA,CAAA;AACAM,cAAAL,SAAA,GAAAA,SAAA;AACAK,cAAAE,SAAA,GAAAN,SAAA;AACAE,YAAAK,WAAA,CAAAH,OAAA;AACA;;;4CAEAX,O,EAAA;AACA,UAAAe,SAAA,IAAAC,GAAAC,MAAA,CAAA,KAAArB,cAAA,EAAA;AACAsB,gBAAA,KADA;AAEAC,eAAA,KAFA;AAGAnB,iBAAAA;AAHA,OAAA,CAAA;AAKA;;;gCAGAD,I,EAAA;AACA,UAAAC,UAAA,KAAAoB,YAAA,CAAArB,IAAA,CAAA;AACA,UAAAsB,SAAA,kEAAArB,OAAA,GAAA,8CAAA;;AAEA;AACA,UAAAsB,MAAA,IAAAC,cAAA,EAAA;AACA,UAAAC,WAAA,IAAAD,cAAA,EAAA;;AAEA;AACAD,UAAAG,IAAA,CAAA,KAAA,EAAAJ,MAAA,EAAA,KAAA;;AAEA;AACAC,UAAAI,IAAA;;AAEA;AACA,UAAAJ,IAAAK,MAAA,IAAA,GAAA,EAAA;AACA;AACA;AACA,aAAAf,aAAA,CAAA,MAAA,EAAA,aAAA,EAAA,kBAAA,EAAA,gBAAA;AACA,OAJA,MAIA;AACA;AACA,YAAAgB,cAAAC,KAAAC,KAAA,CAAAR,IAAAS,YAAA,CAAA;AACAC,gBAAAC,GAAA,CAAAL,WAAA;;AAEA,aAAAM,uBAAA,CAAAlC,OAAA;;AAEA;AACA,aAAAY,aAAA,CAAA,MAAA,EAAA,YAAA,EAAA,yBAAA,EAAA,gBAAA;AACA;AACA;;;;;;ACrEA,IAAAuB,WAAA,IAAAzC,QAAA,CAAA,UAAA,EAAA,OAAA,CAAA;AACA,IAAAC,QAAAE,SAAAa,aAAA,CAAA,WAAA,CAAA;;AAEAf,MAAAyC,OAAA,GAAA,YAAA;AACAD,WAAAE,WAAA,CAAA1C,MAAA2C,KAAA;AACA,CAFA;;ACHA,IAAAC,eAAA1C,SAAAa,aAAA,CAAA,eAAA,CAAA;AACA,IAAA8B,aAAA3C,SAAAa,aAAA,CAAA,gBAAA,CAAA;AACA,IAAAD,QAAAZ,SAAAa,aAAA,CAAA,WAAA,CAAA;;AAEA6B,aAAAE,gBAAA,CAAA,OAAA,EAAA,YAAA;AACAhC,QAAAiC,SAAA,CAAAC,GAAA,CAAA,cAAA;AACA,CAFA;;AAIAH,WAAAC,gBAAA,CAAA,OAAA,EAAA,YAAA;AACAhC,QAAAiC,SAAA,CAAAE,MAAA,CAAA,cAAA;AACA,CAFA","file":"script.js","sourcesContent":["'use strict';\n\nclass AddVideo {\n  constructor(input, videoContainer) {\n    this.videoContainer = document.getElementById(videoContainer);\n  }\n\n  getYoutubeId(link) {\n    let videoId;\n    if (link.indexOf('.be/') !== -1) {\n      videoId = link.split('https://youtu.be/')[1];\n      return videoId;\n    } else {\n      videoId = link.split('v=')[1];\n      let ampersandPosition = videoId.indexOf('&');\n\n      if (ampersandPosition !== -1) {\n        videoId = videoId.substring(0, ampersandPosition);\n      }\n      return videoId;\n    }\n  }\n\n  createElement(elementType, className, innerHtml, appendTo) {\n    const modal = document.querySelector(`.${appendTo}`);\n    const element = document.createElement(elementType);\n    element.className = className;\n    element.innerHTML = innerHtml;\n    modal.appendChild(element);\n  }\n\n  onYouTubeIframeAPIReady(videoId) {\n    const player = new YT.Player(this.videoContainer, {\n      height: '360',\n      width: '640',\n      videoId: videoId\n    });\n  }\n\n\n  httpRequest(link) {\n    const videoId = this.getYoutubeId(link);\n    const apiURL = 'https://www.googleapis.com/youtube/v3/videos?part=snippet&id=' + videoId + '&key=AIzaSyCHT9pNb7goNLOj_VHACnp4PgWtgzUpwPw';\n\n    // 1. Создаём новый объект XMLHttpRequest\n    let xhr = new XMLHttpRequest();\n    let postAjax = new XMLHttpRequest();\n\n    // 2. Конфигурируем его: GET-запрос на URL 'phones.json'\n    xhr.open('GET', apiURL, false);\n\n    // 3. Отсылаем запрос\n    xhr.send();\n\n    // 4. Если код ответа сервера не 200, то это ошибка\n    if (xhr.status != 200) {\n      // обработать ошибку\n      //console.log(xhr.status + ': ' + xhr.statusText); // пример вывода: 404: Not Found\n      this.createElement('span', 'video_error', 'Произошла ошибка', 'modal__content');\n    } else {\n      // вывести результат\n      const youtubeData = JSON.parse(xhr.responseText);\n      console.log(youtubeData);\n\n      this.onYouTubeIframeAPIReady(videoId);\n\n      // callYoutube('player', video_id);\n      this.createElement('span', 'video_done', 'Видео успешно добавлено', 'modal__content');\n    }\n  }\n\n\n}\n","let addVideo = new AddVideo('js_input', 'video');\nconst input = document.querySelector('.js_input');\n\ninput.oninput = function () {\n  addVideo.httpRequest(input.value);\n};\n\n","const openModalBtn = document.querySelector('.js_openModal');\nconst closeModal = document.querySelector('.js_closeModal');\nconst modal = document.querySelector('.js_modal');\n\nopenModalBtn.addEventListener('click', function () {\n  modal.classList.add('modal_opened');\n});\n\ncloseModal.addEventListener('click', function () {\n  modal.classList.remove('modal_opened');\n});\n"]}