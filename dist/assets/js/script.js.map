{"version":3,"sources":["script.js","modal/modal.js"],"names":["AddVideo","input","videoContainer","document","querySelector","getElementById","videoId","value","indexOf","split","ampersandPosition","substring","getYoutubeId","apiURL","xhr","XMLHttpRequest","postAjax","open","send","status","statusBox","classList","add","innerHTML","setTimeout","closeBtn","click","youtubeData","JSON","parse","responseText","inputVideoId","setAttribute","video_id","inputVideoTitle","items","snippet","title","inputVideoDesc","description","contains","videoContainerDiv","createElement","className","videoParent","insertBefore","remove","callYoutube","isAvailable","openModalBtn","closeModal","modal","addEventListener"],"mappings":"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","file":"script.js","sourcesContent":["'use strict';\n\nclass AddVideo {\n  constructor(input, videoContainer) {\n    this.input = document.querySelector('.' + input);\n    this.videoContainer = document.getElementById(videoContainer);\n  }\n\n  getYoutubeId() {\n    let videoId;\n\n    if (this.input.value.indexOf('.be/') !== -1) {\n      videoId = this.input.value.split('https://youtu.be/')[1];\n      return videoId;\n    } else {\n      videoId = this.input.value.split('v=')[1];\n      let ampersandPosition = videoId.indexOf('&');\n\n      if (ampersandPosition !== -1) {\n        videoId = videoId.substring(0, ampersandPosition);\n      }\n      return videoId;\n    }\n  }\n\n  httpRequest() {\n    const videoId = this.getYoutubeId();\n    const apiURL = 'https://www.googleapis.com/youtube/v3/videos?part=snippet&id=' + videoId + '&key=AIzaSyCHT9pNb7goNLOj_VHACnp4PgWtgzUpwPw';\n\n    // 1. Создаём новый объект XMLHttpRequest\n    let xhr = new XMLHttpRequest();\n    let postAjax = new XMLHttpRequest();\n\n    // 2. Конфигурируем его: GET-запрос на URL 'phones.json'\n    xhr.open('GET', apiURL, false);\n\n    // 3. Отсылаем запрос\n    xhr.send();\n\n    // 4. Если код ответа сервера не 200, то это ошибка\n    if (xhr.status != 200) {\n      // обработать ошибку\n      //console.log(xhr.status + ': ' + xhr.statusText); // пример вывода: 404: Not Found\n      statusBox.classList.add('modalVideo__status-box_error');\n      statusBox.innerHTML = 'Произошла ошибка!';\n      setTimeout(function () {\n        closeBtn.click();\n      }, 3000);\n    } else {\n      // вывести результат\n      const youtubeData = JSON.parse(xhr.responseText);\n      inputVideoId.setAttribute('value', video_id);\n      inputVideoTitle.setAttribute('value', youtubeData.items[0].snippet.title);\n      inputVideoDesc.innerHTML = youtubeData.items[0].snippet.description;\n\n      // проверка есть ли видео на странице редактирования\n      if (videoContainer.classList.contains('form-lms__video_exist')) {\n        const videoContainerDiv = document.createElement('div');\n        videoContainerDiv.className = 'form-lms__video_exist';\n        videoContainerDiv.setAttribute('id', 'player');\n        videoParent.insertBefore(videoContainerDiv, videoContainer);\n        videoContainer.remove();\n      }\n      callYoutube('player', video_id);\n      // onYouTubeIframeAPIReady(video_id, 'player');\n      isAvailable.innerHTML = 'Видео: ' + youtubeData.items[0].snippet.title;\n      statusBox.classList.add('modalVideo__status-box_success');\n      statusBox.innerHTML = 'Видео успешно добавлено!';\n\n      setTimeout(function () {\n        closeBtn.click();\n      }, 3000);\n    }\n  }\n}\n","const openModalBtn = document.querySelector('.js_openModal');\nconst closeModal = document.querySelector('.js_closeModal');\nconst modal = document.querySelector('.js_modal');\n\nopenModalBtn.addEventListener('click', function () {\n  modal.classList.add('modal_opened');\n});\n\ncloseModal.addEventListener('click', function () {\n  modal.classList.remove('modal_opened');\n});\n"]}